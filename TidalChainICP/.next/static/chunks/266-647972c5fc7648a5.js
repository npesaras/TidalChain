"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{60704:(e,t,r)=>{r.d(t,{B8:()=>I,UC:()=>x,bL:()=>k,l9:()=>A});var i=r(12115),n=r(85185),a=r(46081),o=r(89196),s=r(28905),l=r(63655),c=r(94315),u=r(5845),d=r(61285),h=r(95155),f="Tabs",[y,p]=(0,a.A)(f,[o.RG]),w=(0,o.RG)(),[g,v]=y(f),m=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,onValueChange:n,defaultValue:a,orientation:o="horizontal",dir:s,activationMode:f="automatic",...y}=e,p=(0,c.jH)(s),[w,v]=(0,u.i)({prop:i,onChange:n,defaultProp:a});return(0,h.jsx)(g,{scope:r,baseId:(0,d.B)(),value:w,onValueChange:v,orientation:o,dir:p,activationMode:f,children:(0,h.jsx)(l.sG.div,{dir:p,"data-orientation":o,...y,ref:t})})});m.displayName=f;var b="TabsList",_=i.forwardRef((e,t)=>{let{__scopeTabs:r,loop:i=!0,...n}=e,a=v(b,r),s=w(r);return(0,h.jsx)(o.bL,{asChild:!0,...s,orientation:a.orientation,dir:a.dir,loop:i,children:(0,h.jsx)(l.sG.div,{role:"tablist","aria-orientation":a.orientation,...n,ref:t})})});_.displayName=b;var E="TabsTrigger",D=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,disabled:a=!1,...s}=e,c=v(E,r),u=w(r),d=K(c.baseId,i),f=P(c.baseId,i),y=i===c.value;return(0,h.jsx)(o.q7,{asChild:!0,...u,focusable:!a,active:y,children:(0,h.jsx)(l.sG.button,{type:"button",role:"tab","aria-selected":y,"aria-controls":f,"data-state":y?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...s,ref:t,onMouseDown:(0,n.m)(e.onMouseDown,e=>{a||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(i)}),onKeyDown:(0,n.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(i)}),onFocus:(0,n.m)(e.onFocus,()=>{let e="manual"!==c.activationMode;y||a||!e||c.onValueChange(i)})})})});D.displayName=E;var S="TabsContent",T=i.forwardRef((e,t)=>{let{__scopeTabs:r,value:n,forceMount:a,children:o,...c}=e,u=v(S,r),d=K(u.baseId,n),f=P(u.baseId,n),y=n===u.value,p=i.useRef(y);return i.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(s.C,{present:a||y,children:r=>{let{present:i}=r;return(0,h.jsx)(l.sG.div,{"data-state":y?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!i,id:f,tabIndex:0,...c,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:i&&o})}})});function K(e,t){return"".concat(e,"-trigger-").concat(t)}function P(e,t){return"".concat(e,"-content-").concat(t)}T.displayName=S;var k=m,I=_,A=D,x=T},75525:(e,t,r)=>{r.d(t,{A:()=>i});let i=(0,r(19946).A)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},78558:(e,t,r)=>{let i,n;r.d(t,{UJ:()=>em});var a,o,s,l,c,u,d,h,f=r(35558),y=r(11361),p=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},w=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};function g(e){return null!==e&&"object"==typeof e}class v{constructor(e){if(a.set(this,void 0),o.set(this,void 0),e.byteLength!==v.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");p(this,a,(0,f.em)(e),"f"),p(this,o,v.derEncode(e),"f")}static from(e){if("string"==typeof e){let t=(0,f.aD)(e);return this.fromRaw(t)}if(g(e)){if(g(e)&&Object.hasOwnProperty.call(e,"__derEncodedPublicKey__"))return this.fromDer(e);if(ArrayBuffer.isView(e))return this.fromRaw((0,f.em)(e.buffer));if(e instanceof ArrayBuffer)return this.fromRaw(e);else if("rawKey"in e)return this.fromRaw(e.rawKey);else if("derKey"in e)return this.fromDer(e.derKey);else if("toDer"in e)return this.fromDer(e.toDer())}throw Error("Cannot construct Ed25519PublicKey from the provided key.")}static fromRaw(e){return new v(e)}static fromDer(e){return new v(this.derDecode(e))}static derEncode(e){let t=(0,f.C2)(e,f.le).buffer;return t.__derEncodedPublicKey__=void 0,t}static derDecode(e){let t=(0,f.n9)(e,f.le);if(t.length!==this.RAW_KEY_LENGTH)throw Error("An Ed25519 public key must be exactly 32bytes long");return(0,f.em)(t)}get rawKey(){return w(this,a,"f")}get derKey(){return w(this,o,"f")}toDer(){return this.derKey}toRaw(){return this.rawKey}}a=new WeakMap,o=new WeakMap,v.RAW_KEY_LENGTH=32;class m extends f.A4{constructor(e,t){super(),s.set(this,void 0),l.set(this,void 0),p(this,s,v.from(e),"f"),p(this,l,new Uint8Array(t),"f")}static generate(e){if(e&&32!==e.length)throw Error("Ed25519 Seed needs to be 32 bytes long.");e||(e=y.ev.utils.randomPrivateKey()),(0,f.HA)(e,new Uint8Array(Array(32).fill(0)))&&console.warn("Seed is all zeros. This is not a secure seed. Please provide a seed with sufficient entropy if this is a production environment.");let t=new Uint8Array(32);for(let r=0;r<32;r++)t[r]=new Uint8Array(e)[r];let r=y.ev.getPublicKey(t);return m.fromKeyPair(r,t)}static fromParsedJson(e){let[t,r]=e;return new m(v.fromDer((0,f.aD)(t)),(0,f.aD)(r))}static fromJSON(e){let t=JSON.parse(e);if(Array.isArray(t)){if("string"==typeof t[0]&&"string"==typeof t[1])return this.fromParsedJson([t[0],t[1]]);throw Error("Deserialization error: JSON must have at least 2 items.")}throw Error(`Deserialization error: Invalid JSON type for string: ${JSON.stringify(e)}`)}static fromKeyPair(e,t){return new m(v.fromRaw(e),t)}static fromSecretKey(e){let t=y.ev.getPublicKey(new Uint8Array(e));return m.fromKeyPair(t,e)}toJSON(){return[(0,f.nj)(w(this,s,"f").toDer()),(0,f.nj)(w(this,l,"f"))]}getKeyPair(){return{secretKey:w(this,l,"f"),publicKey:w(this,s,"f")}}getPublicKey(){return w(this,s,"f")}async sign(e){let t=new Uint8Array(e),r=(0,f.Nn)(y.ev.sign(t,w(this,l,"f").slice(0,32)));return Object.defineProperty(r,"__signature__",{enumerable:!1,value:void 0}),r}static verify(e,t,r){let[i,n,a]=[e,t,r].map(e=>("string"==typeof e&&(e=(0,f.aD)(e)),e instanceof Uint8Array&&(e=(0,f.em)(e.buffer)),new Uint8Array(e)));return y.ev.verify(i,n,a)}}s=new WeakMap,l=new WeakMap;class b extends Error{constructor(e){super(e),this.message=e,Object.setPrototypeOf(this,b.prototype)}}function _(e){if(void 0!==r.g&&r.g.crypto&&r.g.crypto.subtle)return r.g.crypto.subtle;if(e)return e;if("undefined"!=typeof crypto&&crypto.subtle)return crypto.subtle;throw new b("Global crypto was not available and none was provided. Please inlcude a SubtleCrypto implementation. See https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto")}class E extends f.A4{constructor(e,t,r){super(),this._keyPair=e,this._derKey=t,this._subtleCrypto=r}static async generate(e){let{extractable:t=!1,keyUsages:r=["sign","verify"],subtleCrypto:i}=null!=e?e:{},n=_(i),a=await n.generateKey({name:"ECDSA",namedCurve:"P-256"},t,r),o=await n.exportKey("spki",a.publicKey);return new this(a,o,n)}static async fromKeyPair(e,t){let r=_(t),i=await r.exportKey("spki",e.publicKey);return new E(e,i,r)}getKeyPair(){return this._keyPair}getPublicKey(){let e=this._derKey,t=Object.create(this._keyPair.publicKey);return t.toDer=function(){return e},t}async sign(e){return await this._subtleCrypto.sign({name:"ECDSA",hash:{name:"SHA-256"}},this._keyPair.privateKey,e)}}var D=r(39736),S=r(15154),T=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},K=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};class P{constructor(e){c.set(this,void 0),T(this,c,e,"f")}get rawKey(){return K(this,c,"f").rawKey}get derKey(){return K(this,c,"f").derKey}toDer(){return K(this,c,"f").toDer()}getPublicKey(){return K(this,c,"f")}getPrincipal(){if(!K(this,c,"f").rawKey)throw Error("Cannot get principal from a public key without a raw key.");return D.p.fromUint8Array(new Uint8Array(K(this,c,"f").rawKey))}transformRequest(){return Promise.reject("Not implemented. You are attempting to use a partial identity to sign calls, but this identity only has access to the public key.To sign calls, use a DelegationIdentity instead.")}}c=new WeakMap;var k=r(29238),I=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},A=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)},x=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r};let O=new TextEncoder().encode("\x1aic-request-auth-delegation"),j=new TextEncoder().encode("\nic-request");function C(e){if("string"!=typeof e||e.length<64)throw Error("Invalid public key.");return(0,f.aD)(e)}class L{constructor(e,t,r){this.pubkey=e,this.expiration=t,this.targets=r}toCBOR(){return S.value.map(Object.assign({pubkey:S.value.bytes(this.pubkey),expiration:S.value.u64(this.expiration.toString(16),16)},this.targets&&{targets:S.value.array(this.targets.map(e=>S.value.bytes((0,k.em)(e.toUint8Array()))))}))}toJSON(){return Object.assign({expiration:this.expiration.toString(16),pubkey:(0,f.nj)(this.pubkey)},this.targets&&{targets:this.targets.map(e=>e.toHex())})}}async function N(e,t,r,i){let n=new L(t.toDer(),BigInt(+r)*BigInt(1e6),i),a=new Uint8Array([...O,...new Uint8Array((0,f.Gb)(Object.assign({},n)))]);return{delegation:n,signature:await e.sign((0,k.em)(a))}}class B{constructor(e,t){this.delegations=e,this.publicKey=t}static async create(e,t,r=new Date(Date.now()+9e5),i={}){var n,a;let o=await N(e,t,r,i.targets);return new B([...(null===(n=i.previous)||void 0===n?void 0:n.delegations)||[],o],(null===(a=i.previous)||void 0===a?void 0:a.publicKey)||e.getPublicKey().toDer())}static fromJSON(e){let{publicKey:t,delegations:r}="string"==typeof e?JSON.parse(e):e;if(!Array.isArray(r))throw Error("Invalid delegations.");return new this(r.map(e=>{let{delegation:t,signature:r}=e,{pubkey:i,expiration:n,targets:a}=t;if(void 0!==a&&!Array.isArray(a))throw Error("Invalid targets.");return{delegation:new L(C(i),BigInt("0x"+n),a&&a.map(e=>{if("string"!=typeof e)throw Error("Invalid target.");return D.p.fromHex(e)})),signature:C(r)}}),C(t))}static fromDelegations(e,t){return new this(e,t)}toJSON(){return{delegations:this.delegations.map(e=>{let{delegation:t,signature:r}=e,{targets:i}=t;return{delegation:Object.assign({expiration:t.expiration.toString(16),pubkey:(0,f.nj)(t.pubkey)},i&&{targets:i.map(e=>e.toHex())}),signature:(0,f.nj)(r)}}),publicKey:(0,f.nj)(this.publicKey)}}}class W extends f.A4{constructor(e,t){super(),this._inner=e,this._delegation=t}static fromDelegation(e,t){return new this(e,t)}getDelegation(){return this._delegation}getPublicKey(){return{derKey:this._delegation.publicKey,toDer:()=>this._delegation.publicKey}}sign(e){return this._inner.sign(e)}async transformRequest(e){let{body:t}=e,r=x(e,["body"]),i=await (0,f.Gb)(t);return Object.assign(Object.assign({},r),{body:{content:t,sender_sig:await this.sign((0,k.em)(new Uint8Array([...j,...new Uint8Array(i)]))),sender_delegation:this._delegation.delegations,sender_pubkey:this._delegation.publicKey}})}}class M extends P{constructor(e,t){super(e),u.set(this,void 0),I(this,u,t,"f")}get delegation(){return A(this,u,"f")}static fromDelegation(e,t){return new M(e,t)}}u=new WeakMap,r(4277);var R=r(19989);!function(e){e[e.ECDSA_WITH_SHA256=-7]="ECDSA_WITH_SHA256"}(d||(d={})),f.A4;let H=["mousedown","mousemove","keydown","touchstart","wheel"];class U{constructor(e={}){var t;this.callbacks=[],this.idleTimeout=6e5,this.timeoutID=void 0;let{onIdle:r,idleTimeout:i=6e5}=e||{};this.callbacks=r?[r]:[],this.idleTimeout=i;let n=this._resetTimer.bind(this);if(window.addEventListener("load",n,!0),H.forEach(function(e){document.addEventListener(e,n,!0)}),null==e?void 0:e.captureScroll){let r=((e,t)=>{let r;return(...i)=>{let n=this;clearTimeout(r),r=window.setTimeout(function(){r=void 0,e.apply(n,i)},t)}})(n,null!==(t=null==e?void 0:e.scrollDebounce)&&void 0!==t?t:100);window.addEventListener("scroll",r,!0)}n()}static create(e={}){return new this(e)}registerCallback(e){this.callbacks.push(e)}exit(){clearTimeout(this.timeoutID),window.removeEventListener("load",this._resetTimer,!0);let e=this._resetTimer.bind(this);H.forEach(function(t){document.removeEventListener(t,e,!0)}),this.callbacks.forEach(e=>e())}_resetTimer(){let e=this.exit.bind(this);window.clearTimeout(this.timeoutID),this.timeoutID=window.setTimeout(e,this.idleTimeout)}}let J=(e,t)=>t.some(t=>e instanceof t),z=new WeakMap,V=new WeakMap,G=new WeakMap,F=new WeakMap,q=new WeakMap,Y={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return V.get(e);if("objectStoreNames"===t)return e.objectStoreNames||G.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return $(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function $(e){if(e instanceof IDBRequest)return function(e){let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",n),e.removeEventListener("error",a)},n=()=>{t($(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",n),e.addEventListener("error",a)});return t.then(t=>{t instanceof IDBCursor&&z.set(t,e)}).catch(()=>{}),q.set(t,e),t}(e);if(F.has(e))return F.get(e);let t=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Q(this),t),$(z.get(this))}:function(...t){return $(e.apply(Q(this),t))}:function(t,...r){let i=e.call(Q(this),t,...r);return G.set(i,t.sort?t.sort():[t]),$(i)};return(e instanceof IDBTransaction&&function(e){if(V.has(e))return;let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",a),e.removeEventListener("abort",a)},n=()=>{t(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",n),e.addEventListener("error",a),e.addEventListener("abort",a)});V.set(e,t)}(e),J(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,Y):e}(e);return t!==e&&(F.set(e,t),q.set(t,e)),t}let Q=e=>q.get(e),X=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],ee=new Map;function et(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(ee.get(t))return ee.get(t);let r=t.replace(/FromIndex$/,""),i=t!==r,n=Z.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(n||X.includes(r)))return;let a=async function(e,...t){let a=this.transaction(e,n?"readwrite":"readonly"),o=a.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),n&&a.done]))[0]};return ee.set(t,a),a}Y=(e=>({...e,get:(t,r,i)=>et(t,r)||e.get(t,r,i),has:(t,r)=>!!et(t,r)||e.has(t,r)}))(Y);let er="auth-client-db",ei="ic-keyval",en=async(e=er,t=ei,r)=>(ey&&(null==localStorage?void 0:localStorage.getItem(eh))&&(localStorage.removeItem(eh),localStorage.removeItem(ed)),await function(e,t,{blocked:r,upgrade:i,blocking:n,terminated:a}={}){let o=indexedDB.open(e,t),s=$(o);return i&&o.addEventListener("upgradeneeded",e=>{i($(o.result),e.oldVersion,e.newVersion,$(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener("close",()=>a()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}(e,r,{upgrade:e=>{e.objectStoreNames.contains(t)&&e.clear(t),e.createObjectStore(t)}}));async function ea(e,t,r){return await e.get(t,r)}async function eo(e,t,r,i){return await e.put(t,i,r)}async function es(e,t,r){return await e.delete(t,r)}class el{constructor(e,t){this._db=e,this._storeName=t}static async create(e){let{dbName:t=er,storeName:r=ei,version:i=ef}=null!=e?e:{};return new el(await en(t,r,i),r)}async set(e,t){return await eo(this._db,this._storeName,e,t)}async get(e){var t;return null!==(t=await ea(this._db,this._storeName,e))&&void 0!==t?t:null}async remove(e){return await es(this._db,this._storeName,e)}}var ec=function(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r},eu=function(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)};let ed="identity",eh="delegation",ef=1,ey="undefined"!=typeof window;class ep{constructor(e="ic-",t){this.prefix=e,this._localStorage=t}get(e){return Promise.resolve(this._getLocalStorage().getItem(this.prefix+e))}set(e,t){return this._getLocalStorage().setItem(this.prefix+e,t),Promise.resolve()}remove(e){return this._getLocalStorage().removeItem(this.prefix+e),Promise.resolve()}_getLocalStorage(){if(this._localStorage)return this._localStorage;let e="undefined"==typeof window?void 0===r.g?"undefined"==typeof self?void 0:self.localStorage:r.g.localStorage:window.localStorage;if(!e)throw Error("Could not find local storage.");return e}}class ew{constructor(e){h.set(this,void 0),ec(this,h,null!=e?e:{},"f")}get _db(){return new Promise(e=>{if(this.initializedDb){e(this.initializedDb);return}el.create(eu(this,h,"f")).then(t=>{this.initializedDb=t,e(t)})})}async get(e){let t=await this._db;return await t.get(e)}async set(e,t){let r=await this._db;await r.set(e,t)}async remove(e){let t=await this._db;await t.remove(e)}}h=new WeakMap;let eg="ECDSA",ev="Ed25519";class em{constructor(e,t,r,i,n,a,o,s){this._identity=e,this._key=t,this._chain=r,this._storage=i,this.idleManager=n,this._createOptions=a,this._idpWindow=o,this._eventHandler=s,this._registerDefaultIdleCallback()}static async create(e={}){var t,r,i;let n;let a=null!==(t=e.storage)&&void 0!==t?t:new ew,o=null!==(r=e.keyType)&&void 0!==r?r:eg,s=null;if(e.identity)s=e.identity;else{let e=await a.get(ed);if(!e&&ey)try{let t=new ep,r=await t.get(eh),i=await t.get(ed);r&&i&&o===eg&&(console.log("Discovered an identity stored in localstorage. Migrating to IndexedDB"),await a.set(eh,r),await a.set(ed,i),e=r,await t.remove(eh),await t.remove(ed))}catch(e){console.error("error while attempting to recover localstorage: "+e)}if(e)try{"object"==typeof e?s=o===ev&&"string"==typeof e?await m.fromJSON(e):await E.fromKeyPair(e):"string"==typeof e&&(s=m.fromJSON(e))}catch(e){}}let l=new f.mC,c=null;if(s)try{let t=await a.get(eh);if("object"==typeof t&&null!==t)throw Error("Delegation chain is incorrectly stored. A delegation chain should be stored as a string.");e.identity?l=e.identity:t&&(c=B.fromJSON(t),function(e,t){for(let{delegation:t}of e.delegations)if(+new Date(Number(t.expiration/BigInt(1e6)))<=+Date.now())return!1;let r=[],i=void 0;for(let t of(i&&(Array.isArray(i)?r.push(...i.map(e=>"string"==typeof e?D.p.fromText(e):e)):r.push("string"==typeof i?D.p.fromText(i):i)),r)){let r=t.toText();for(let{delegation:t}of e.delegations){if(void 0===t.targets)continue;let e=!0;for(let i of t.targets)if(i.toText()===r){e=!1;break}if(e)return!1}}return!0}(c)?l="toDer"in s?M.fromDelegation(s,c):W.fromDelegation(s,c):(await eb(a),s=null))}catch(e){console.error(e),await eb(a),s=null}return(null===(i=e.idleOptions)||void 0===i?void 0:i.disableIdle)?n=void 0:(c||e.identity)&&(n=U.create(e.idleOptions)),s||(o===ev?(s=await m.generate(),await a.set(ed,JSON.stringify(s.toJSON()))):(e.storage&&o===eg&&console.warn(`You are using a custom storage provider that may not support CryptoKey storage. If you are using a custom storage provider that does not support CryptoKey storage, you should use '${ev}' as the key type, as it can serialize to a string`),s=await E.generate(),await a.set(ed,s.getKeyPair()))),new this(l,s,c,a,n,e)}_registerDefaultIdleCallback(){var e,t;let r=null===(e=this._createOptions)||void 0===e?void 0:e.idleOptions;(null==r?void 0:r.onIdle)||(null==r?void 0:r.disableDefaultIdleCallback)||null===(t=this.idleManager)||void 0===t||t.registerCallback(()=>{this.logout(),location.reload()})}async _handleSuccess(e,t){var r,i;let n=e.delegations.map(e=>({delegation:new L(e.delegation.pubkey,e.delegation.expiration,e.delegation.targets),signature:e.signature.buffer})),a=B.fromDelegations(n,e.userPublicKey.buffer),o=this._key;if(!o)return;this._chain=a,"toDer"in o?this._identity=M.fromDelegation(o,this._chain):this._identity=W.fromDelegation(o,this._chain),null===(r=this._idpWindow)||void 0===r||r.close();let s=null===(i=this._createOptions)||void 0===i?void 0:i.idleOptions;this.idleManager||(null==s?void 0:s.disableIdle)||(this.idleManager=U.create(s),this._registerDefaultIdleCallback()),this._removeEventListener(),delete this._idpWindow,this._chain&&await this._storage.set(eh,JSON.stringify(this._chain.toJSON())),null==t||t(e)}getIdentity(){return this._identity}async isAuthenticated(){return!this.getIdentity().getPrincipal().isAnonymous()&&null!==this._chain}async login(e){var t,r,i,n;let a=BigInt(8)*BigInt(36e11),o=new URL((null===(t=null==e?void 0:e.identityProvider)||void 0===t?void 0:t.toString())||"https://identity.internetcomputer.org");o.hash="#authorize",null===(r=this._idpWindow)||void 0===r||r.close(),this._removeEventListener(),this._eventHandler=this._getEventHandler(o,Object.assign({maxTimeToLive:null!==(i=null==e?void 0:e.maxTimeToLive)&&void 0!==i?i:a},e)),window.addEventListener("message",this._eventHandler),this._idpWindow=null!==(n=window.open(o.toString(),"idpWindow",null==e?void 0:e.windowOpenerFeatures))&&void 0!==n?n:void 0;let s=()=>{this._idpWindow&&(this._idpWindow.closed?this._handleFailure("UserInterrupt",null==e?void 0:e.onError):setTimeout(s,500))};s()}_getEventHandler(e,t){return async r=>{var i,n,a;if(r.origin!==e.origin)return;let o=r.data;switch(o.kind){case"authorize-ready":{let r=Object.assign({kind:"authorize-client",sessionPublicKey:new Uint8Array(null===(i=this._key)||void 0===i?void 0:i.getPublicKey().toDer()),maxTimeToLive:null==t?void 0:t.maxTimeToLive,allowPinAuthentication:null==t?void 0:t.allowPinAuthentication,derivationOrigin:null===(n=null==t?void 0:t.derivationOrigin)||void 0===n?void 0:n.toString()},null==t?void 0:t.customValues);null===(a=this._idpWindow)||void 0===a||a.postMessage(r,e.origin);break}case"authorize-client-success":try{await this._handleSuccess(o,null==t?void 0:t.onSuccess)}catch(e){this._handleFailure(e.message,null==t?void 0:t.onError)}break;case"authorize-client-failure":this._handleFailure(o.text,null==t?void 0:t.onError)}}}_handleFailure(e,t){var r;null===(r=this._idpWindow)||void 0===r||r.close(),null==t||t(e),this._removeEventListener(),delete this._idpWindow}_removeEventListener(){this._eventHandler&&window.removeEventListener("message",this._eventHandler),this._eventHandler=void 0}async logout(e={}){if(await eb(this._storage),this._identity=new f.mC,this._chain=null,e.returnTo)try{window.history.pushState({},"",e.returnTo)}catch(t){window.location.href=e.returnTo}}}async function eb(e){await e.remove(ed),await e.remove(eh),await e.remove("iv")}},92138:(e,t,r)=>{r.d(t,{A:()=>i});let i=(0,r(19946).A)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])}}]);